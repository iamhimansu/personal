"use strict";(self["webpackChunkpersonal"]=self["webpackChunkpersonal"]||[]).push([[400],{1322:function(s,e,r){r.d(e,{Z:function(){return t}});class t{constructor(){}static getClassName(){return this.constructor.name}rules(){return[]}static find(){console.log(this.getClassName())}}},2182:function(s,e,r){r.d(e,{Z:function(){return p}});var t=r(3396),a=r(7139);const o={key:0,class:"w-full border border-red-300 rounded p-2 bg-red-50 text-xs mb-3"},l={class:"list-item list-disc ml-4"};function d(s,e,r,d,i,n){return r.errors.length?((0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("ul",l,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.errors,((s,e)=>((0,t.wg)(),(0,t.iD)("li",{key:e,class:"text-red-600"},(0,a.zw)(r.errors[e]?.message),1)))),128))])])):(0,t.kq)("",!0)}var i={name:"ErrorSummary",props:{errors:Array},data(){return{}}},n=r(89);const m=(0,n.Z)(i,[["render",d]]);var p=m},9400:function(s,e,r){r.r(e),r.d(e,{default:function(){return R}});var t=r(3396),a=r(9242),o=r(7139);const l={class:"my-3 p-2 py-4 md:p-8"},d={class:"p-8 flex flex-col w-full md:w-96 place-items-start md:border border-gray-100 md:shadow-xl md:rounded mx-auto"},i=(0,t.uE)('<div class="header"><h1 class="text-2xl font-bold mb-2"> Register </h1><h4 class="text-xs font-bold mb-3"> Hi, please register </h4></div><div class="social-login w-full mt-3 mb-3"><button class="w-full border p-2 text-[10px] rounded font-bold hover:bg-gray-100">Login with Google</button></div>',2),n={class:"w-full mb-3"},m=(0,t._)("label",{class:"block text-xs font-medium leading-6 text-gray-900",for:"name"},"Name",-1),p={class:"rounded-md shadow-sm"},c={class:"w-full mb-3"},u=(0,t._)("label",{class:"block text-xs font-medium leading-6 text-gray-900",for:"email"},"Email",-1),h={class:"rounded-md shadow-sm"},w={class:"w-full mb-3"},b=(0,t._)("label",{class:"block text-xs font-medium leading-6 text-gray-900",for:"password"},"Password",-1),g={class:"relative rounded-md shadow-sm"},y=["type"],f={class:"absolute inset-y-0 right-0 flex items-center"},x=(0,t._)("label",{class:"sr-only"},"View",-1),v={class:"w-full mb-3"},_=(0,t._)("label",{class:"block text-xs font-medium leading-6 text-gray-900",for:"re-password"},"Re-enter Password",-1),k={class:"relative rounded-md shadow-sm"},C=["type"],E={class:"w-full mb-3"},T={class:"w-full mt-2 mb-3 text-center text-xs"};function U(s,e,r,U,D,P){const I=(0,t.up)("error-summary"),N=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",l,[(0,t._)("div",d,[i,(0,t.Wm)(I,{errors:D.errors},null,8,["errors"]),(0,t._)("div",n,[m,(0,t._)("div",p,[(0,t.wy)((0,t._)("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>D.name=s),class:"block w-full text-sm rounded-md border ring-0 outline-0 py-1.5 pl-5 text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6",name:"name",placeholder:"Name",type:"text"},null,512),[[a.nr,D.name]])])]),(0,t._)("div",c,[u,(0,t._)("div",h,[(0,t.wy)((0,t._)("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>D.email=s),class:"block w-full text-sm rounded-md border ring-0 outline-0 py-1.5 pl-5 text-gray-900 placeholder:text-gray-400 sm:text-sm sm:leading-6",name:"email",placeholder:"E.g. johndoe@email.com",type:"email"},null,512),[[a.nr,D.email]])])]),(0,t._)("div",w,[b,(0,t._)("div",g,[(0,t.wy)((0,t._)("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=s=>D.password=s),type:D.passwordType,class:"block w-full rounded-md border outline-0 py-1.5 pl-5 pr-20 text-gray-900 ring-0 placeholder:text-gray-400 sm:text-sm sm:leading-6 text-sm",name:"password",placeholder:"Enter your password"},null,8,y),[[a.YZ,D.password]]),(0,t._)("div",f,[x,(0,t._)("button",{class:"w-10 h-full",onClick:e[3]||(e[3]=(...s)=>P.setPasswordType&&P.setPasswordType(...s))},[(0,t._)("i",{class:(0,o.C_)(D.passwordIcon)},null,2)])])])]),(0,t._)("div",v,[_,(0,t._)("div",k,[(0,t.wy)((0,t._)("input",{id:"re-password","onUpdate:modelValue":e[4]||(e[4]=s=>D.passwordConfirm=s),type:D.passwordType,class:"block w-full rounded-md border outline-0 py-1.5 pl-5 pr-20 text-gray-900 ring-0 placeholder:text-gray-400 sm:text-sm sm:leading-6 text-sm",name:"password",placeholder:"Confirm your password"},null,8,C),[[a.YZ,D.passwordConfirm]])])]),(0,t._)("div",E,[(0,t._)("button",{class:"bg-gray-800 text-xs h-10 text-white rounded w-full p-2 text-center hover:bg-gray-700",onClick:e[5]||(e[5]=s=>P.register())},"Register ")]),(0,t._)("div",T,[(0,t.Uk)(" Have an account? "),(0,t.Wm)(N,{class:"text-black font-bold",to:"/login"},{default:(0,t.w5)((()=>[(0,t.Uk)("Login")])),_:1})])])])}r(7658);var D=r(1322);class P extends D.Z{constructor(s,e){super(),this.name=s.name,this.email=s.email,this.password=s.password,this.passwordConfirm=s.passwordConfirm,this.db=e,this.previousUsers=[]}validate(){return this.errors=[],this.name.length||this.errors.push({attribute:"name",message:"Name cannot be empty."}),this.email.length||this.errors.push({attribute:"email",message:"Email cannot be empty."}),this.password.length?this.password.length<8?this.errors.push({attribute:"password",message:"Password should be greater than 8 characters."}):this.password!==this.passwordConfirm&&this.errors.push({attribute:"passwordConfirm",message:"Passwords dont match."}):this.errors.push({attribute:"password",message:"Password cannot be empty."}),0===this.errors.length}collectErrors(){return this.validate(),this.errors}save(){this.validate()?this.insertData():console.log(this.errors)}insertData(){this.db.exec("BEGIN;");const s="\n        INSERT INTO core_users (name, email, password, passwordHash, createdAt)\n        VALUES (:name,:email,:password,:passwordHash,:createdAt)\n      ",e=this.db.prepare(s);e.bind({":name":this.name,":password":this.password,":passwordHash":this.password,":email":this.email,":createdAt":(new Date).getTime()}),e.run(),e.free(),this.db.exec("COMMIT;");const r="SELECT * FROM core_users",t=this.db.prepare(r);while(t.step())this.previousUsers.push(t.getAsObject());t.free(),console.log(this.previousUsers)}}var I=r(2182),N=r(65),Z={name:"RegisterPage",components:{ErrorSummary:I.Z},computed:{...(0,N.Se)(["getDB"])},data(){return{passwordType:"password",passwordIcon:"bi bi-eye",name:"",password:"",passwordConfirm:"",email:"",errors:[]}},methods:{setPasswordType(){this.passwordType="password"===this.passwordType?"text":"password",this.passwordIcon="bi bi-eye"===this.passwordIcon?"bi bi-eye-slash":"bi bi-eye"},register(){const s={name:this.name,email:this.email,password:this.password,passwordConfirm:this.passwordConfirm},e=new P(s,this.getDB);this.errors=e.collectErrors(),e.save()}}},A=r(89);const H=(0,A.Z)(Z,[["render",U]]);var R=H}}]);
//# sourceMappingURL=400.71dbd810.js.map